# Apps

Each apps have its own role to define custom behaviour. However, each apps must :

- define a borgmatic backup policy located at `/etc/borgmatic.d/app.yml`. It need to be validated with following command : `root/.local/bin/validate-borgmatic-config -c %s` where `%s` is the file.
- define a nginx configuration located at `/etc/nginx/sites-available/app.conf` and symlink it to `/etc/nginx/sites-enabled/app.conf` if you want to enable it.
- If you need a https certificate, it can be auto-generated by certbot. Just add your domain to `certbot_certs` variable with a task like this :

```yml
- name: Add domain to certificate to be generated
  set_fact:
    certbot_certs: '{{ certbot_certs + [ { "domains": [my_app.domain] } ] }}'
```
